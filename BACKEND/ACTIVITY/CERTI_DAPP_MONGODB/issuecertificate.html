<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Certificate</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        async function issueCertificate(event) {
            event.preventDefault()
            const scourse = document.getElementById("selectcourse").value
            const certid = document.getElementById("certificateid").value
            const cname = document.getElementById("candidatename").value
            
            const grade = document.getElementById("grade").value
            const isdate = document.getElementById("issuedate").value
            console.log(scourse, certid, grade, isdate);

            const response = await fetch(`http://127.0.0.1:8005/issuecertificate`, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: "include",
                body: JSON.stringify({
                    selectedCourse:scourse,
                    certiId:certid,
                    candidateName:cname,
                    selectGrade:grade,
                    issueDate:isdate
                })
            })
            console.log(response.status);

            if(response.status == 200){
                alert("Successfully certificate issued")
                console.log("Successfully certificate issued");
                
            } else{
                alert("error")
                console.log("Error");
                
            }
            

        }
    </script>
</head>

<body>

    <!-- Navbar -->
    <nav class="text-right p-4 bg-white">
        <a href="frontpage.html"
            class="text-gray-800 px-4 py-2 rounded hover:bg-sky-500 hover:text-white transition-all">Home</a>
        <a href="issuecertificate.html"
            class="text-gray-800 px-4 py-2 rounded hover:bg-sky-500 hover:text-white transition-all">Issue
            Certificate</a>
    </nav>

    <!-- Title -->
    <h2 class="text-2xl mt-10 text-center font-semibold text-gray-800">Certificate Dapp</h2>

    <!-- Form Container -->
    <div class="bg-white p-8 mt-8 mx-auto w-full max-w-lg rounded-lg shadow-lg border border-gray-300">
        <h3 class="text-center text-xl font-medium text-gray-700 mb-6">Issue New Certificate</h3>

        <!-- Course Selection -->
        <div class="mb-4">
            <label class="block font-semibold text-gray-600">Select Course <sup class="text-red-500">*</sup></label>
            <select required
                class="w-full mt-2 h-10 border border-gray-300 rounded-md focus:outline-none focus:border-sky-500 px-2"
                id="selectcourse">
                <option value="Certified Blockchain Associate">Certified Blockchain Associate</option>
                <option value="Certified Cyber Security">Certified Cyber Security</option>
                <option value="Certified Cyber Forensic">Certified Cyber Forensic</option>
                <option value="Certified Python Course">Certified Python Course</option>
                <option value="Certified Web Development">Certified Web Development</option>
            </select>
        </div>

        <!-- Certificate ID -->
        <div class="mb-4">
            <label class="block font-semibold text-gray-600">Certificate ID <sup class="text-red-500">*</sup></label>
            <input type="text" placeholder="Certificate ID" id="certificateid" required
                class="w-full mt-2 h-10 border border-gray-300 rounded-md focus:outline-none focus:border-sky-500 px-2">
        </div>

        <!-- Candidate Name -->
        <div class="mb-4">
            <label class="block font-semibold text-gray-600">Candidate Name <sup class="text-red-500">*</sup></label>
            <input type="text" placeholder="Candidate Name" id="candidatename" required
                class="w-full mt-2 h-10 border border-gray-300 rounded-md focus:outline-none focus:border-sky-500 px-2">
        </div>

        <!-- Grade Selection -->
        <div class="mb-4">
            <label class="block font-semibold text-gray-600">Select Grade <sup class="text-red-500">*</sup></label>
            <select id="grade" required
                class="w-full mt-2 h-10 border border-gray-300 rounded-md focus:outline-none focus:border-sky-500 px-2">
                <option value="select" disabled selected>--- Select ---</option>
                <option value="S">S</option>
                <option value="A">A</option>
                <option value="A+">A+</option>
            </select>
        </div>

        <!-- Issue Date -->
        <div class="mb-4">
            <label class="block font-semibold text-gray-600">Issue Date <sup class="text-red-500">*</sup></label>
            <input type="date" required
                class="w-full mt-2 h-10 border border-gray-300 rounded-md focus:outline-none focus:border-sky-500 px-2"
                id="issuedate">
        </div>

        <!-- Submit Button -->
        <div class="text-center">
            <button type="button"
                class="w-full sm:w-1/2 bg-sky-500 text-white py-2 rounded-md hover:bg-sky-600 transition-all font-semibold"
                onclick="issueCertificate(event)">Issue Certificate</button>
        </div>
    </div>

</body>

</html>